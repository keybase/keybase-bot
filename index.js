!function(Q,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var F=t();for(var B in F)("object"==typeof exports?exports:Q)[B]=F[B]}}(global,function(){return function(Q){var t={};function F(B){if(t[B])return t[B].exports;var s=t[B]={i:B,l:!1,exports:{}};return Q[B].call(s.exports,s,s.exports,F),s.l=!0,s.exports}return F.m=Q,F.c=t,F.d=function(Q,t,B){F.o(Q,t)||Object.defineProperty(Q,t,{enumerable:!0,get:B})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,t){if(1&t&&(Q=F(Q)),8&t)return Q;if(4&t&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(F.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&t&&"string"!=typeof Q)for(var s in Q)F.d(B,s,function(t){return Q[t]}.bind(null,s));return B},F.n=function(Q){var t=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(t,"a",t),t},F.o=function(Q,t){return Object.prototype.hasOwnProperty.call(Q,t)},F.p="",F(F.s=1)}([function(module,exports){eval('module.exports = require("child_process");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjaGlsZF9wcm9jZXNzXCI/M2RhNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY2hpbGRfcHJvY2Vzc1wiKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: external "child_process"\nvar external_child_process_ = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./lib/exec-to-json.js\n\n\nvar exec_to_json_execToJson = function execToJson(params) {\n  var stdinBuffer = params.stdinBuffer;\n  var out = null;\n  var outBuffers = [];\n  var child = Object(external_child_process_["spawn"])(params.command, params.args || []);\n\n  if (stdinBuffer) {\n    child.stdin.write(stdinBuffer);\n    child.stdin.end();\n  }\n\n  child.stdout.on(\'data\', function (chunk) {\n    outBuffers.push(chunk);\n  });\n  return new Promise(function (resolve, reject) {\n    child.on(\'close\', function (code) {\n      if (code) {\n        reject(new Error("exited with code ".concat(code)));\n      } else {\n        var stdout = Buffer.concat(outBuffers).toString(\'utf8\');\n\n        try {\n          out = JSON.parse(stdout);\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      resolve(out);\n    });\n  });\n};\n\n\n// CONCATENATED MODULE: ./lib/keybase-status.js\n\n\n// ----------------------------------------------------------------------------\n// calls back with a JSON object describing the user\'s\n// status with Keybase. For example, status.Username and status.Device.name\n// may be of interest\n// ----------------------------------------------------------------------------\nvar keybase_status_getKeybaseNativeStatusJson = function getKeybaseNativeStatusJson() {\n  return exec_to_json_execToJson({\n    command: \'keybase\',\n    args: [\'status\', \'-j\']\n  });\n}; // ----------------------------------------------------------------------------\n// calls back with just {username, devicename}, if fully logged in and\n// unlocked.\n// ----------------------------------------------------------------------------\n\n\nvar getKeybaseUsernameAndDevicename = function getKeybaseUsernameAndDevicename() {\n  return new Promise(function (resolve, reject) {\n    keybase_status_getKeybaseNativeStatusJson().then(function (status) {\n      if (status && status.Username && status.Device && status.Device.name) {\n        resolve({\n          username: status.Username,\n          devicename: status.Device.name\n        });\n      } else {\n        reject(new Error(\'failed to get username + device name\'));\n      }\n    });\n  });\n};\n\n\n// CONCATENATED MODULE: ./lib/constants.js\nvar CHAT_API_VERSION = 1;\n\n// CONCATENATED MODULE: ./lib/chat-api.js\n\n\n\n// ----------------------------------------------------------------------------\n// calls back with a JSON object describing the user\'s\n// status with Keybase. For example, status.Username and status.Device.name\n// may be of interest\n// ----------------------------------------------------------------------------\nvar chat_api_runApiCommand = function runApiCommand(arg) {\n  var input = {\n    method: arg.method,\n    params: {\n      version: CHAT_API_VERSION,\n      options: arg.options\n    }\n  };\n  return new Promise(function (resolve, reject) {\n    var inputString = JSON.stringify(input);\n    var size = inputString.length;\n    exec_to_json_execToJson({\n      command: \'keybase\',\n      args: [\'chat\', \'api\'],\n      stdinBuffer: Buffer.alloc(size, inputString, \'utf8\')\n    }).then(function (o) {\n      var res = null;\n\n      if (o && o.result) {\n        res = o.result;\n      } else if (o && o.error) {\n        var oError = o.error;\n        reject(new Error(oError.message || oError.toString()));\n      } else {\n        reject(new Error("Unknown error parsing result - no \\"result\\" field"));\n      }\n\n      resolve(res);\n    }).catch(function (err) {\n      reject(err);\n    });\n  });\n};\n\n\n// CONCATENATED MODULE: ./lib/channel-watcher.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar ChannelWatcher =\n/*#__PURE__*/\nfunction () {\n  // --------------------------------------------------------------------------\n  // --------------------------------------------------------------------------\n  function ChannelWatcher(arg) {\n    _classCallCheck(this, ChannelWatcher);\n\n    this._bot = arg.bot;\n    this._onMessages = arg.onMessages;\n    this._channel = arg.channel;\n    this._highestId = -1;\n    this._loopCount = 0;\n\n    this._watchLoop();\n  } // --------------------------------------------------------------------------\n\n\n  _createClass(ChannelWatcher, [{\n    key: "_didISendMessage",\n    value: function _didISendMessage(m) {\n      var myInfo = this._bot.myInfo();\n\n      return myInfo ? myInfo.username === m.msg.sender.username : false;\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_checkForNewMessages",\n    value: function _checkForNewMessages(cb) {\n      var _this = this;\n\n      var newMessages = [];\n\n      this._bot.chatRead({\n        channel: this._channel,\n        unreadOnly: true\n      }).then(function (res) {\n        if (res && res.ratelimits) {\n          _this._bot._gasPreserver.passGas(res.ratelimits);\n        }\n\n        if (res && res.messages) {\n          newMessages = res.messages;\n          _this._highestId = res.messages.reduce(function (a, m) {\n            return Math.max(a, m.msg.id);\n          }, _this._highestId);\n        }\n\n        console.log("loopCount: ".concat(_this._loopCount, " newMessages: ").concat(newMessages.length));\n\n        if (newMessages.length) {\n          _this._onMessages({\n            messages: newMessages,\n            channel: _this._channel\n          });\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_watchLoop",\n    value: function _watchLoop() {\n      var _this2 = this;\n\n      console.log("".concat(this._loopCount, " \'").concat(this._channel.name, " entering watchLoop"));\n\n      this._checkForNewMessages(function () {\n        var delay = _this2._bot._gasPreserver.recommendedWait();\n\n        console.log("".concat(_this2._loopCount, " \'").concat(_this2._channel.name, " finishing watchLoop ").concat(delay));\n        setTimeout(function () {\n          _this2._loopCount++;\n\n          _this2._watchLoop();\n        }, delay);\n      });\n    }\n  }]);\n\n  return ChannelWatcher;\n}();\n\n\n// CONCATENATED MODULE: ./lib/utils.js\nfunction chatChannelToKey(channel) {\n  // TODO: come back to this\n  return JSON.stringify([channel.name, channel.public, channel.topic_type]);\n}\n\n\n// CONCATENATED MODULE: ./lib/full-watcher.js\nfunction full_watcher_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction full_watcher_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction full_watcher_createClass(Constructor, protoProps, staticProps) { if (protoProps) full_watcher_defineProperties(Constructor.prototype, protoProps); if (staticProps) full_watcher_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar FullWatcher =\n/*#__PURE__*/\nfunction () {\n  // --------------------------------------------------------------------------\n  // --------------------------------------------------------------------------\n  function FullWatcher(arg) {\n    full_watcher_classCallCheck(this, FullWatcher);\n\n    this._bot = arg.bot;\n    this._onMessages = arg.onMessages;\n    this._loopCount = 0;\n\n    this._watchLoop();\n  } // --------------------------------------------------------------------------\n\n\n  full_watcher_createClass(FullWatcher, [{\n    key: "_checkForNewMessagesInOneConversation",\n    value: function _checkForNewMessagesInOneConversation(conversation) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        _this._bot.chatRead({\n          channel: conversation.channel,\n          unreadOnly: true\n        }).then(function (res) {\n          if (res && res.ratelimits) {\n            _this._bot._gasPreserver.passGas(res.ratelimits);\n\n            resolve();\n          }\n\n          if (res && res.messages) {\n            var newMessages = res.messages;\n            console.log("found: ".concat(newMessages.length, " newMessages: ").concat(conversation.channel));\n\n            if (res.messages.length) {\n              _this._onMessages({\n                messages: newMessages,\n                channel: conversation.channel\n              });\n\n              resolve();\n            }\n          }\n        });\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_checkForNewMessagesInConversations",\n    value: function _checkForNewMessagesInConversations(arg) {\n      var _this2 = this;\n\n      var conversations = arg.conversations;\n      var index = arg.index;\n\n      if (!index) {\n        index = 0;\n      }\n\n      if (index === conversations.length) {\n        return Promise.resolve(null);\n      }\n\n      console.log("CHECKING ".concat(index, ", ").concat(conversations[index].channel, " for new messages"));\n      return this._checkForNewMessagesInOneConversation(conversations[index]).then(function () {\n        if (index + 1 === conversations.length) {}\n\n        return _this2._checkForNewMessagesInConversations({\n          conversations: conversations,\n          index: index + 1\n        });\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_checkForNewMessagesInAllConversations",\n    value: function _checkForNewMessagesInAllConversations() {\n      var _this3 = this;\n\n      return this._bot.chatList({}).then(function (res) {\n        if (res && res.ratelimits) {\n          _this3._bot._gasPreserver.passGas(res.ratelimits);\n        }\n\n        if (res && res.conversations) {\n          var conversations = res.conversations.filter(function (c) {\n            return c.unread;\n          });\n          console.log("Of ".concat(res.conversations.length, " there are ").concat(conversations.length, " that are unread."));\n          return _this3._checkForNewMessagesInConversations({\n            conversations: conversations\n          });\n        }\n      }).catch(function (err) {\n        console.log(\'Got error getting chat list:\', err);\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_watchLoop",\n    value: function _watchLoop() {\n      var _this4 = this;\n\n      this._checkForNewMessagesInAllConversations.then(function () {\n        var delay = _this4._bot._gasPreserver.recommendedWait();\n\n        setTimeout(function () {\n          _this4._loopCount++;\n\n          _this4._watchLoop();\n        }, delay);\n      });\n    } // --------------------------------------------------------------------------\n\n  }]);\n\n  return FullWatcher;\n}();\n\n\n// CONCATENATED MODULE: ./lib/tweakables.js\nvar tweakables = {\n  MIN_CHANNEL_WATCH_LOOP: 1000,\n  MAX_CHANNEL_WATCH_LOOP: 60000,\n  DEFAULT_GAS: 500,\n  DEFAULT_TIME_LEFT: 1500,\n  TARGET_GAS_REMAINING: 100,\n  SAFETY_BUFFER: 1.5,\n  GAS_MONITOR_WINDOW: 10000,\n  GAS_ADJ_MULT: 1.1\n};\n/* harmony default export */ var lib_tweakables = (tweakables);\n// CONCATENATED MODULE: ./lib/gas-preserver.js\nfunction gas_preserver_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction gas_preserver_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction gas_preserver_createClass(Constructor, protoProps, staticProps) { if (protoProps) gas_preserver_defineProperties(Constructor.prototype, protoProps); if (staticProps) gas_preserver_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar gas_preserver_GasPreserver =\n/*#__PURE__*/\nfunction () {\n  // --------------------------------------------------------------------------\n  // --------------------------------------------------------------------------\n  function GasPreserver() {\n    gas_preserver_classCallCheck(this, GasPreserver);\n\n    this._lastPassedGas = [];\n    this._currentWait = lib_tweakables.MIN_CHANNEL_WATCH_LOOP;\n  } // --------------------------------------------------------------------------\n\n\n  gas_preserver_createClass(GasPreserver, [{\n    key: "passGas",\n    value: function passGas(rateLimits) {\n      this._lastPassedGas.push(rateLimits[0]); // let\'s just take the first for now\n\n\n      this._filterOldGas();\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "recommendedWait",\n    value: function recommendedWait() {\n      var speed = this._getCurrentSpeed();\n\n      var gas = this._getRemainingGas();\n\n      var gas_left_with_buffer = Math.max(0, gas - lib_tweakables.TARGET_GAS_REMAINING);\n\n      var timeLeft = this._getTimeTillReset(); // this._currentWait = 1000 * (speed * timeLeft / gas) * tweakables.SAFETY_BUFFER\n\n\n      if (speed * timeLeft > gas_left_with_buffer) {\n        this._currentWait *= lib_tweakables.GAS_ADJ_MULT;\n      } else {\n        this._currentWait /= lib_tweakables.GAS_ADJ_MULT;\n      }\n\n      this._currentWait = Math.max(lib_tweakables.MIN_CHANNEL_WATCH_LOOP, this._currentWait);\n      this._currentWait = Math.min(lib_tweakables.MAX_CHANNEL_WATCH_LOOP, this._currentWait);\n      console.log("...speed=".concat(speed.toFixed(2), ", gas=").concat(gas, ", timeLeft=").concat(timeLeft, ", currentWait=").concat(this._currentWait, ", history=").concat(this._lastPassedGas.length));\n      return this._currentWait;\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_filterOldGas",\n    value: function _filterOldGas() {\n      var ind = 0; // throw away any data before a reset\n\n      for (ind = this._lastPassedGas.length - 2; ind >= 0; ind--) {\n        var latest = this._lastPassedGas[this._lastPassedGas.length - 1];\n        var curr = this._lastPassedGas[ind];\n\n        if (curr.gas < latest.gas || curr.reset < latest.reset) {\n          break;\n        }\n      }\n\n      if (ind >= 0) {\n        console.log(\'BEFORE GAS CLEANUP\', this._lastPassedGas);\n\n        this._lastPassedGas.splice(0, ind + 1);\n\n        console.log(\'AFTER GAS CLEANUP\', this._lastPassedGas);\n      } // now throw away anything over a certain age\n\n\n      if (this._lastPassedGas.length > 2) {\n        var keepers = this._lastPassedGas.slice(-2);\n\n        var candidates = this._lastPassedGas.slice(0, -2);\n\n        candidates = candidates.filter(function (c) {\n          return c.reset < keepers[1].reset + lib_tweakables.GAS_MONITOR_WINDOW / 1000;\n        });\n        this._lastPassedGas = candidates.concat(keepers); //console.log(this._lastPassedGas)\n      }\n\n      return;\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_getCurrentSpeed",\n    value: function _getCurrentSpeed() {\n      if (this._lastPassedGas.length < 2) {\n        return 1;\n      } else {\n        var g = this._lastPassedGas;\n        var glast = g[g.length - 1];\n        var speed = (g[0].gas - glast.gas) / (1 + g[0].reset - glast.reset);\n        return speed;\n      }\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_getRemainingGas",\n    value: function _getRemainingGas() {\n      if (this._lastPassedGas.length < 1) {\n        return lib_tweakables.DEFAULT_GAS;\n      } else {\n        return this._lastPassedGas[this._lastPassedGas.length - 1].gas;\n      }\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_getTimeTillReset",\n    value: function _getTimeTillReset() {\n      if (this._lastPassedGas.length < 1) {\n        return lib_tweakables.DEFAULT_TIME_LEFT;\n      } else {\n        return this._lastPassedGas[this._lastPassedGas.length - 1].reset;\n      }\n    } // --------------------------------------------------------------------------\n\n  }]);\n\n  return GasPreserver;\n}();\n\n\n// CONCATENATED MODULE: ./lib/keybase-exec.js\n\nfunction keybaseExec(params) {\n  var child = Object(external_child_process_["spawn"])(\'keybase\', params.args);\n  console.log(\'inside keybase exec\');\n  var outBuffers = [];\n  var out = null;\n\n  if (params.stdinBuffer) {\n    child.stdin.write(params.stdinBuffer);\n    child.stdin.end();\n  }\n\n  child.stdout.on(\'data\', function (chunk) {\n    outBuffers.push(chunk);\n  });\n  return new Promise(function (resolve, reject) {\n    child.on(\'close\', function (code) {\n      if (code) {\n        reject(new Error("exited with code ".concat(code)));\n      } else {\n        var stdout = Buffer.concat(outBuffers).toString(\'utf8\');\n\n        try {\n          out = stdout === \'\' ? stdout : JSON.parse(stdout);\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      resolve(out);\n    });\n  });\n}\n// CONCATENATED MODULE: ./lib/bot.js\nfunction bot_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction bot_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction bot_createClass(Constructor, protoProps, staticProps) { if (protoProps) bot_defineProperties(Constructor.prototype, protoProps); if (staticProps) bot_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\n\n// ============================================================================\nvar bot_Bot =\n/*#__PURE__*/\nfunction () {\n  // --------------------------------------------------------------------------\n  function Bot() {\n    bot_classCallCheck(this, Bot);\n\n    this._verbose = false;\n    this._dPair = null;\n    this._initialized = false;\n    this._channelWatchers = new Map();\n    this._fullWatcher = null;\n    this._gasPreserver = new gas_preserver_GasPreserver();\n  } // --------------------------------------------------------------------------\n\n\n  bot_createClass(Bot, [{\n    key: "init",\n    value: function init(options) {\n      var _this = this;\n\n      this._verbose = options.verbose || false;\n      return keybaseExec({\n        args: [\'oneshot\', \'--username\', options.username, \'--paperkey\', options.paperkey]\n      }).catch(function (err) {\n        return console.log(err);\n      }).then(function () {\n        return getKeybaseUsernameAndDevicename().then(function (currentDPair) {\n          if (currentDPair) {\n            _this._dPair = currentDPair;\n\n            _this._log("intialized ".concat(currentDPair.username, " (device=").concat(currentDPair.devicename, ")"));\n          }\n\n          _this._initialized = true;\n        });\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "chatList",\n    value: function chatList(options) {\n      return this._safelyRunApiCommand({\n        method: \'list\',\n        options: options\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "chatSend",\n    value: function chatSend(options) {\n      var channel = options.channel,\n          message = options.message;\n      return this._safelyRunApiCommand({\n        method: \'send\',\n        options: {\n          channel: channel,\n          message: message\n        }\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "chatRead",\n    value: function chatRead(options) {\n      var channel = options.channel;\n      var peek = false;\n      var unreadOnly = false;\n\n      if (typeof options.peek !== \'undefined\') {\n        peek = options.peek;\n      }\n\n      if (typeof options.unreadOnly !== \'undefined\') {\n        unreadOnly = options.unreadOnly;\n      }\n\n      return this._safelyRunApiCommand({\n        method: \'read\',\n        options: {\n          channel: channel,\n          peek: peek,\n          unreadOnly: unreadOnly\n        }\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "chatDelete",\n    value: function chatDelete(options) {\n      var channel = options.channel,\n          messageId = options.messageId;\n      return this._safelyRunApiCommand({\n        method: \'delete\',\n        options: {\n          channel: channel,\n          messageId: messageId\n        }\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "myInfo",\n    value: function myInfo() {\n      return this._dPair;\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "watchChannelForNewMessages",\n    value: function watchChannelForNewMessages(options) {\n      var channel = options.channel,\n          onMessages = options.onMessages;\n      var key = chatChannelToKey(channel);\n\n      if (this._channelWatchers.has(key)) {\n        throw new Error("already watching the channel ".concat(JSON.stringify(channel)));\n      } else {\n        this._channelWatchers.set(key, new ChannelWatcher({\n          channel: channel,\n          onMessages: onMessages,\n          bot: this\n        }));\n      }\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "watchAllChannelsForNewMessages",\n    value: function watchAllChannelsForNewMessages(options) {\n      var onMessages = options.onMessages;\n\n      if (this._fullWatcher) {\n        throw new Error("already watching watching; can\'t have 2 message watchers}");\n      } else {\n        this._fullWatcher = new FullWatcher({\n          onMessages: onMessages,\n          bot: this\n        });\n      }\n    } // --------------------------------------------------------------------------\n    // --------------------------------------------------------------------------\n    //  - make sure inited ok\n    //  - make sure user is still the same user since init\n    // --------------------------------------------------------------------------\n\n  }, {\n    key: "_log",\n    value: function _log(msg) {\n      if (this._verbose) {\n        console.log(msg);\n      }\n    }\n  }, {\n    key: "_checkUserAndInit",\n    value: function _checkUserAndInit() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        getKeybaseUsernameAndDevicename().then(function (currentDPair) {\n          if (!_this2._initialized || !currentDPair || !_this2._dPair || currentDPair.username !== _this2._dPair.username) {\n            reject(new Error("Uh-oh, username has changed or we never initialized correctly."));\n          }\n\n          resolve();\n        });\n      });\n    } // --------------------------------------------------------------------------\n\n  }, {\n    key: "_safelyRunApiCommand",\n    value: function _safelyRunApiCommand(arg) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3._checkUserAndInit().then(function () {\n          return chat_api_runApiCommand(arg).then(function (res) {\n            resolve(res);\n          }).catch(function (err) {\n            return reject(err);\n          });\n        });\n      });\n    }\n  }]);\n\n  return Bot;\n}();\n\n\n// CONCATENATED MODULE: ./lib/entry.js\n/* concated harmony reexport Bot */__webpack_require__.d(__webpack_exports__, "Bot", function() { return bot_Bot; });\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZXhlYy10by1qc29uLmpzPzhhN2UiLCJ3ZWJwYWNrOi8vLy4vbGliL2tleWJhc2Utc3RhdHVzLmpzPzQ1OTEiLCJ3ZWJwYWNrOi8vLy4vbGliL2NvbnN0YW50cy5qcz82MTI5Iiwid2VicGFjazovLy8uL2xpYi9jaGF0LWFwaS5qcz8zZTI4Iiwid2VicGFjazovLy8uL2xpYi9jaGFubmVsLXdhdGNoZXIuanM/YzRkOSIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMuanM/MGJmMSIsIndlYnBhY2s6Ly8vLi9saWIvZnVsbC13YXRjaGVyLmpzPzg5YzIiLCJ3ZWJwYWNrOi8vLy4vbGliL3R3ZWFrYWJsZXMuanM/MGU3MSIsIndlYnBhY2s6Ly8vLi9saWIvZ2FzLXByZXNlcnZlci5qcz82ZjZhIiwid2VicGFjazovLy8uL2xpYi9rZXliYXNlLWV4ZWMuanM/YmYwZCIsIndlYnBhY2s6Ly8vLi9saWIvYm90LmpzPzRjYmQiLCJ3ZWJwYWNrOi8vLy4vbGliL2VudHJ5LmpzPzhhZjkiXSwibmFtZXMiOlsiZXhlY1RvSnNvbiIsInBhcmFtcyIsInN0ZGluQnVmZmVyIiwib3V0Iiwib3V0QnVmZmVycyIsImNoaWxkIiwic3Bhd24iLCJjb21tYW5kIiwiYXJncyIsInN0ZGluIiwid3JpdGUiLCJlbmQiLCJzdGRvdXQiLCJvbiIsImNodW5rIiwicHVzaCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY29kZSIsIkVycm9yIiwiQnVmZmVyIiwiY29uY2F0IiwidG9TdHJpbmciLCJKU09OIiwicGFyc2UiLCJlIiwiZ2V0S2V5YmFzZU5hdGl2ZVN0YXR1c0pzb24iLCJnZXRLZXliYXNlVXNlcm5hbWVBbmREZXZpY2VuYW1lIiwidGhlbiIsInN0YXR1cyIsIlVzZXJuYW1lIiwiRGV2aWNlIiwibmFtZSIsInVzZXJuYW1lIiwiZGV2aWNlbmFtZSIsIkNIQVRfQVBJX1ZFUlNJT04iLCJydW5BcGlDb21tYW5kIiwiYXJnIiwiaW5wdXQiLCJtZXRob2QiLCJ2ZXJzaW9uIiwib3B0aW9ucyIsImlucHV0U3RyaW5nIiwic3RyaW5naWZ5Iiwic2l6ZSIsImxlbmd0aCIsImFsbG9jIiwibyIsInJlcyIsInJlc3VsdCIsImVycm9yIiwib0Vycm9yIiwibWVzc2FnZSIsImNhdGNoIiwiZXJyIiwiQ2hhbm5lbFdhdGNoZXIiLCJfYm90IiwiYm90IiwiX29uTWVzc2FnZXMiLCJvbk1lc3NhZ2VzIiwiX2NoYW5uZWwiLCJjaGFubmVsIiwiX2hpZ2hlc3RJZCIsIl9sb29wQ291bnQiLCJfd2F0Y2hMb29wIiwibSIsIm15SW5mbyIsIm1zZyIsInNlbmRlciIsImNiIiwibmV3TWVzc2FnZXMiLCJjaGF0UmVhZCIsInVucmVhZE9ubHkiLCJyYXRlbGltaXRzIiwiX2dhc1ByZXNlcnZlciIsInBhc3NHYXMiLCJtZXNzYWdlcyIsInJlZHVjZSIsImEiLCJNYXRoIiwibWF4IiwiaWQiLCJjb25zb2xlIiwibG9nIiwiX2NoZWNrRm9yTmV3TWVzc2FnZXMiLCJkZWxheSIsInJlY29tbWVuZGVkV2FpdCIsInNldFRpbWVvdXQiLCJjaGF0Q2hhbm5lbFRvS2V5IiwicHVibGljIiwidG9waWNfdHlwZSIsIkZ1bGxXYXRjaGVyIiwiY29udmVyc2F0aW9uIiwiY29udmVyc2F0aW9ucyIsImluZGV4IiwiX2NoZWNrRm9yTmV3TWVzc2FnZXNJbk9uZUNvbnZlcnNhdGlvbiIsIl9jaGVja0Zvck5ld01lc3NhZ2VzSW5Db252ZXJzYXRpb25zIiwiY2hhdExpc3QiLCJmaWx0ZXIiLCJjIiwidW5yZWFkIiwiX2NoZWNrRm9yTmV3TWVzc2FnZXNJbkFsbENvbnZlcnNhdGlvbnMiLCJ0d2Vha2FibGVzIiwiTUlOX0NIQU5ORUxfV0FUQ0hfTE9PUCIsIk1BWF9DSEFOTkVMX1dBVENIX0xPT1AiLCJERUZBVUxUX0dBUyIsIkRFRkFVTFRfVElNRV9MRUZUIiwiVEFSR0VUX0dBU19SRU1BSU5JTkciLCJTQUZFVFlfQlVGRkVSIiwiR0FTX01PTklUT1JfV0lORE9XIiwiR0FTX0FESl9NVUxUIiwiR2FzUHJlc2VydmVyIiwiX2xhc3RQYXNzZWRHYXMiLCJfY3VycmVudFdhaXQiLCJyYXRlTGltaXRzIiwiX2ZpbHRlck9sZEdhcyIsInNwZWVkIiwiX2dldEN1cnJlbnRTcGVlZCIsImdhcyIsIl9nZXRSZW1haW5pbmdHYXMiLCJnYXNfbGVmdF93aXRoX2J1ZmZlciIsInRpbWVMZWZ0IiwiX2dldFRpbWVUaWxsUmVzZXQiLCJtaW4iLCJ0b0ZpeGVkIiwiaW5kIiwibGF0ZXN0IiwiY3VyciIsInJlc2V0Iiwic3BsaWNlIiwia2VlcGVycyIsInNsaWNlIiwiY2FuZGlkYXRlcyIsImciLCJnbGFzdCIsImtleWJhc2VFeGVjIiwiQm90IiwiX3ZlcmJvc2UiLCJfZFBhaXIiLCJfaW5pdGlhbGl6ZWQiLCJfY2hhbm5lbFdhdGNoZXJzIiwiTWFwIiwiX2Z1bGxXYXRjaGVyIiwidmVyYm9zZSIsInBhcGVya2V5IiwiY3VycmVudERQYWlyIiwiX2xvZyIsIl9zYWZlbHlSdW5BcGlDb21tYW5kIiwicGVlayIsIm1lc3NhZ2VJZCIsImtleSIsImhhcyIsInNldCIsIl9jaGVja1VzZXJBbmRJbml0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTs7QUFlQSxJQUFNQSx1QkFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsTUFBRCxFQUFpQztBQUNsRCxNQUFNQyxXQUFXLEdBQUdELE1BQU0sQ0FBQ0MsV0FBM0I7QUFDQSxNQUFJQyxHQUFRLEdBQUcsSUFBZjtBQUNBLE1BQU1DLFVBQXlCLEdBQUcsRUFBbEM7QUFDQSxNQUFNQyxLQUFLLEdBQUdDLHdDQUFLLENBQUNMLE1BQU0sQ0FBQ00sT0FBUixFQUFpQk4sTUFBTSxDQUFDTyxJQUFQLElBQWUsRUFBaEMsQ0FBbkI7O0FBRUEsTUFBSU4sV0FBSixFQUFpQjtBQUNmRyxTQUFLLENBQUNJLEtBQU4sQ0FBWUMsS0FBWixDQUFrQlIsV0FBbEI7QUFDQUcsU0FBSyxDQUFDSSxLQUFOLENBQVlFLEdBQVo7QUFDRDs7QUFFRE4sT0FBSyxDQUFDTyxNQUFOLENBQWFDLEVBQWIs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UDtBQUtELFNBTkQ7QUFPRCxPQVJNLENBQVA7QUFTRDs7Ozs7Ozs7QUM1TEg7QUFBQSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCB7c3Bhd259IGZyb20gJ2NoaWxkX3Byb2Nlc3MnXG5pbXBvcnQgdHlwZSB7UHJvbWlzZUV4ZWN9IGZyb20gJy4vdHlwZXMnXG5cbi8vIHRha2VzIGEgc3RyaW5nIHRvIHJ1biBvbiB0aGUgY29tbWFuZCBsaW5lIHRoYXQgaXMgZXhwZWN0aW5nXG4vLyBKU09OIGluIHN0ZG91dC4gY2FsbHMgYmFjayB3aXRoIGFuIGVycm9yIGlmIG91dHB1dCBkb2Vzbid0XG4vLyBwYXJzZSBhcyBKU09OIG9yIHRoZXJlJ3MgYW4gZXJyb3IgaW4gZXhlY3V0aW9uXG4vL1xuLy8gaWYgcGFzc2VkIGEgQnVmZmVyIGluIHN0ZGluQnVmZmVyLCBwaXBlcyB0aGF0IGludG8gdGhlIHByb2dyYW1cblxudHlwZSBQYXJhbXMgPSB7fFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIGFyZ3M/OiBBcnJheTxzdHJpbmc+LFxuICBzdGRpbkJ1ZmZlcj86IEJ1ZmZlcixcbnx9XG5cbmNvbnN0IGV4ZWNUb0pzb24gPSAocGFyYW1zOiBQYXJhbXMpOiBQcm9taXNlRXhlYyA9PiB7XG4gIGNvbnN0IHN0ZGluQnVmZmVyID0gcGFyYW1zLnN0ZGluQnVmZmVyXG4gIGxldCBvdXQ6IGFueSA9IG51bGxcbiAgY29uc3Qgb3V0QnVmZmVyczogQXJyYXk8QnVmZmVyPiA9IFtdXG4gIGNvbnN0IGNoaWxkID0gc3Bhd24ocGFyYW1zLmNvbW1hbmQsIHBhcmFtcy5hcmdzIHx8IFtdKVxuXG4gIGlmIChzdGRpbkJ1ZmZlcikge1xuICAgIGNoaWxkLnN0ZGluLndyaXRlKHN0ZGluQnVmZmVyKVxuICAgIGNoaWxkLnN0ZGluLmVuZCgpXG4gIH1cblxuICBjaGlsZC5zdGRvdXQub24oJ2RhdGEnLCBjaHVuayA9PiB7XG4gICAgb3V0QnVmZmVycy5wdXNoKGNodW5rKVxuICB9KVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY2hpbGQub24oJ2Nsb3NlJywgY29kZSA9PiB7XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGBleGl0ZWQgd2l0aCBjb2RlICR7Y29kZX1gKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHN0ZG91dDogc3RyaW5nID0gQnVmZmVyLmNvbmNhdChvdXRCdWZmZXJzKS50b1N0cmluZygndXRmOCcpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb3V0ID0gSlNPTi5wYXJzZShzdGRvdXQpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QoZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZShvdXQpXG4gICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IHtleGVjVG9Kc29ufVxuIiwiLy8gQGZsb3dcbmltcG9ydCB0eXBlIHtQcm9taXNlRXhlY30gZnJvbSAnLi90eXBlcy5qcydcbmltcG9ydCB7ZXhlY1RvSnNvbn0gZnJvbSAnLi9leGVjLXRvLWpzb24uanMnXG5cbnR5cGUgVXNlcm5hbWVBbmREZXZpY2UgPSB7fFxuICB1c2VybmFtZTogc3RyaW5nLFxuICBkZXZpY2VuYW1lOiBzdHJpbmcsXG58fVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBjYWxscyBiYWNrIHdpdGggYSBKU09OIG9iamVjdCBkZXNjcmliaW5nIHRoZSB1c2VyJ3Ncbi8vIHN0YXR1cyB3aXRoIEtleWJhc2UuIEZvciBleGFtcGxlLCBzdGF0dXMuVXNlcm5hbWUgYW5kIHN0YXR1cy5EZXZpY2UubmFtZVxuLy8gbWF5IGJlIG9mIGludGVyZXN0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGdldEtleWJhc2VOYXRpdmVTdGF0dXNKc29uID0gKCk6IFByb21pc2VFeGVjID0+IGV4ZWNUb0pzb24oe2NvbW1hbmQ6ICdrZXliYXNlJywgYXJnczogWydzdGF0dXMnLCAnLWonXX0pXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNhbGxzIGJhY2sgd2l0aCBqdXN0IHt1c2VybmFtZSwgZGV2aWNlbmFtZX0sIGlmIGZ1bGx5IGxvZ2dlZCBpbiBhbmRcbi8vIHVubG9ja2VkLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5jb25zdCBnZXRLZXliYXNlVXNlcm5hbWVBbmREZXZpY2VuYW1lID0gKCk6IFByb21pc2U8VXNlcm5hbWVBbmREZXZpY2U+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBnZXRLZXliYXNlTmF0aXZlU3RhdHVzSnNvbigpLnRoZW4oc3RhdHVzID0+IHtcbiAgICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzLlVzZXJuYW1lICYmIHN0YXR1cy5EZXZpY2UgJiYgc3RhdHVzLkRldmljZS5uYW1lKSB7XG4gICAgICAgIHJlc29sdmUoe3VzZXJuYW1lOiBzdGF0dXMuVXNlcm5hbWUsIGRldmljZW5hbWU6IHN0YXR1cy5EZXZpY2UubmFtZX0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdmYWlsZWQgdG8gZ2V0IHVzZXJuYW1lICsgZGV2aWNlIG5hbWUnKSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQge2dldEtleWJhc2VOYXRpdmVTdGF0dXNKc29uLCBnZXRLZXliYXNlVXNlcm5hbWVBbmREZXZpY2VuYW1lfVxuIiwiLy8gQGZsb3dcbmNvbnN0IENIQVRfQVBJX1ZFUlNJT04gPSAxXG5cbmV4cG9ydCB7Q0hBVF9BUElfVkVSU0lPTn1cbiIsIi8vIEBmbG93XG5pbXBvcnQge2V4ZWNUb0pzb259IGZyb20gJy4vZXhlYy10by1qc29uJ1xuaW1wb3J0IHtDSEFUX0FQSV9WRVJTSU9OfSBmcm9tICcuL2NvbnN0YW50cy5qcydcblxudHlwZSBBcGlDb21tYW5kQXJnID0ge21ldGhvZDogc3RyaW5nLCBvcHRpb25zOiBPYmplY3R9XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNhbGxzIGJhY2sgd2l0aCBhIEpTT04gb2JqZWN0IGRlc2NyaWJpbmcgdGhlIHVzZXInc1xuLy8gc3RhdHVzIHdpdGggS2V5YmFzZS4gRm9yIGV4YW1wbGUsIHN0YXR1cy5Vc2VybmFtZSBhbmQgc3RhdHVzLkRldmljZS5uYW1lXG4vLyBtYXkgYmUgb2YgaW50ZXJlc3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgcnVuQXBpQ29tbWFuZCA9IChhcmc6IEFwaUNvbW1hbmRBcmcpOiBQcm9taXNlPGFueT4gPT4ge1xuICBjb25zdCBpbnB1dDogT2JqZWN0ID0ge1xuICAgIG1ldGhvZDogYXJnLm1ldGhvZCxcbiAgICBwYXJhbXM6IHtcbiAgICAgIHZlcnNpb246IENIQVRfQVBJX1ZFUlNJT04sXG4gICAgICBvcHRpb25zOiBhcmcub3B0aW9ucyxcbiAgICB9LFxuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbnB1dFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGlucHV0KVxuICAgIGNvbnN0IHNpemUgPSBpbnB1dFN0cmluZy5sZW5ndGhcbiAgICBleGVjVG9Kc29uKHtcbiAgICAgIGNvbW1hbmQ6ICdrZXliYXNlJyxcbiAgICAgIGFyZ3M6IFsnY2hhdCcsICdhcGknXSxcbiAgICAgIHN0ZGluQnVmZmVyOiBCdWZmZXIuYWxsb2Moc2l6ZSwgaW5wdXRTdHJpbmcsICd1dGY4JyksXG4gICAgfSlcbiAgICAgIC50aGVuKChvOiBhbnkpID0+IHtcbiAgICAgICAgbGV0IHJlczogYW55ID0gbnVsbFxuICAgICAgICBpZiAobyAmJiBvLnJlc3VsdCkge1xuICAgICAgICAgIHJlcyA9IG8ucmVzdWx0XG4gICAgICAgIH0gZWxzZSBpZiAobyAmJiBvLmVycm9yKSB7XG4gICAgICAgICAgY29uc3Qgb0Vycm9yID0gby5lcnJvclxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3Iob0Vycm9yLm1lc3NhZ2UgfHwgb0Vycm9yLnRvU3RyaW5nKCkpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVua25vd24gZXJyb3IgcGFyc2luZyByZXN1bHQgLSBubyBcInJlc3VsdFwiIGZpZWxkYCkpXG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXMpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnI/OiBFcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoZXJyKVxuICAgICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IHtydW5BcGlDb21tYW5kfVxuZXhwb3J0IHR5cGUge0FwaUNvbW1hbmRBcmd9XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHtCb3R9IGZyb20gJy4vYm90LmpzJ1xuaW1wb3J0IHR5cGUge01lc3NhZ2VzSGFuZGxlciwgQ2JFcnJvciwgQ2hhdENoYW5uZWwsIENoYXRSZWFkTWVzc2FnZX0gZnJvbSAnLi90eXBlcy5qcydcblxuY2xhc3MgQ2hhbm5lbFdhdGNoZXIge1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIF9ib3Q6IEJvdFxuICBfY2hhbm5lbDogQ2hhdENoYW5uZWxcbiAgX29uTWVzc2FnZXM6IE1lc3NhZ2VzSGFuZGxlclxuICBfaGlnaGVzdElkOiBudW1iZXJcbiAgX2xvb3BDb3VudDogbnVtYmVyXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBjb25zdHJ1Y3Rvcihhcmc6IHtjaGFubmVsOiBDaGF0Q2hhbm5lbCwgYm90OiBCb3QsIG9uTWVzc2FnZXM6IE1lc3NhZ2VzSGFuZGxlcn0pOiB2b2lkIHtcbiAgICB0aGlzLl9ib3QgPSBhcmcuYm90XG4gICAgdGhpcy5fb25NZXNzYWdlcyA9IGFyZy5vbk1lc3NhZ2VzXG4gICAgdGhpcy5fY2hhbm5lbCA9IGFyZy5jaGFubmVsXG4gICAgdGhpcy5faGlnaGVzdElkID0gLTFcbiAgICB0aGlzLl9sb29wQ291bnQgPSAwXG4gICAgdGhpcy5fd2F0Y2hMb29wKClcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgX2RpZElTZW5kTWVzc2FnZShtOiBhbnkpOiBib29sZWFuIHtcbiAgICBjb25zdCBteUluZm8gPSB0aGlzLl9ib3QubXlJbmZvKClcbiAgICByZXR1cm4gbXlJbmZvID8gbXlJbmZvLnVzZXJuYW1lID09PSBtLm1zZy5zZW5kZXIudXNlcm5hbWUgOiBmYWxzZVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBfY2hlY2tGb3JOZXdNZXNzYWdlcyhjYjogQ2JFcnJvcik6IHZvaWQge1xuICAgIGxldCBuZXdNZXNzYWdlczogQXJyYXk8Q2hhdFJlYWRNZXNzYWdlPiA9IFtdXG4gICAgdGhpcy5fYm90XG4gICAgICAuY2hhdFJlYWQoe2NoYW5uZWw6IHRoaXMuX2NoYW5uZWwsIHVucmVhZE9ubHk6IHRydWV9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcyAmJiByZXMucmF0ZWxpbWl0cykge1xuICAgICAgICAgIHRoaXMuX2JvdC5fZ2FzUHJlc2VydmVyLnBhc3NHYXMocmVzLnJhdGVsaW1pdHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcyAmJiByZXMubWVzc2FnZXMpIHtcbiAgICAgICAgICBuZXdNZXNzYWdlcyA9IHJlcy5tZXNzYWdlc1xuICAgICAgICAgIHRoaXMuX2hpZ2hlc3RJZCA9IHJlcy5tZXNzYWdlcy5yZWR1Y2UoKGEsIG0pID0+IE1hdGgubWF4KGEsIG0ubXNnLmlkKSwgdGhpcy5faGlnaGVzdElkKVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBsb29wQ291bnQ6ICR7dGhpcy5fbG9vcENvdW50fSBuZXdNZXNzYWdlczogJHtuZXdNZXNzYWdlcy5sZW5ndGh9YClcbiAgICAgICAgaWYgKG5ld01lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX29uTWVzc2FnZXMoe21lc3NhZ2VzOiBuZXdNZXNzYWdlcywgY2hhbm5lbDogdGhpcy5fY2hhbm5lbH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfSlcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgX3dhdGNoTG9vcCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhgJHt0aGlzLl9sb29wQ291bnR9ICcke3RoaXMuX2NoYW5uZWwubmFtZX0gZW50ZXJpbmcgd2F0Y2hMb29wYClcbiAgICB0aGlzLl9jaGVja0Zvck5ld01lc3NhZ2VzKCgpID0+IHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5fYm90Ll9nYXNQcmVzZXJ2ZXIucmVjb21tZW5kZWRXYWl0KClcbiAgICAgIGNvbnNvbGUubG9nKGAke3RoaXMuX2xvb3BDb3VudH0gJyR7dGhpcy5fY2hhbm5lbC5uYW1lfSBmaW5pc2hpbmcgd2F0Y2hMb29wICR7ZGVsYXl9YClcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl9sb29wQ291bnQrK1xuICAgICAgICB0aGlzLl93YXRjaExvb3AoKVxuICAgICAgfSwgZGVsYXkpXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQge0NoYW5uZWxXYXRjaGVyfVxuIiwiLy8gQGZsb3dcbmltcG9ydCB0eXBlIHtDaGF0Q2hhbm5lbH0gZnJvbSAnLi90eXBlcy5qcydcblxuZnVuY3Rpb24gY2hhdENoYW5uZWxUb0tleSAoY2hhbm5lbDogQ2hhdENoYW5uZWwpOiBzdHJpbmcge1xuICAvLyBUT0RPOiBjb21lIGJhY2sgdG8gdGhpc1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoW2NoYW5uZWwubmFtZSwgY2hhbm5lbC5wdWJsaWMsIGNoYW5uZWwudG9waWNfdHlwZV0pXG59XG5cbmV4cG9ydCB7Y2hhdENoYW5uZWxUb0tleX1cbiIsIi8vIEBmbG93XG5pbXBvcnQge0JvdH0gZnJvbSAnLi9ib3QuanMnXG5pbXBvcnQgdHlwZSB7TWVzc2FnZXNIYW5kbGVyLCBDYkVycm9yfSBmcm9tICcuL3R5cGVzLmpzJ1xuXG5jbGFzcyBGdWxsV2F0Y2hlciB7XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgX2JvdDogQm90XG4gIF9vbk1lc3NhZ2VzOiBNZXNzYWdlc0hhbmRsZXJcbiAgX2xvb3BDb3VudDogbnVtYmVyXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBjb25zdHJ1Y3Rvcihhcmc6IHtib3Q6IEJvdCwgb25NZXNzYWdlczogTWVzc2FnZXNIYW5kbGVyfSk6IHZvaWQge1xuICAgIHRoaXMuX2JvdCA9IGFyZy5ib3RcbiAgICB0aGlzLl9vbk1lc3NhZ2VzID0gYXJnLm9uTWVzc2FnZXNcbiAgICB0aGlzLl9sb29wQ291bnQgPSAwXG4gICAgdGhpcy5fd2F0Y2hMb29wKClcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgX2NoZWNrRm9yTmV3TWVzc2FnZXNJbk9uZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb246IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX2JvdC5jaGF0UmVhZCh7Y2hhbm5lbDogY29udmVyc2F0aW9uLmNoYW5uZWwsIHVucmVhZE9ubHk6IHRydWV9KS50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMgJiYgcmVzLnJhdGVsaW1pdHMpIHtcbiAgICAgICAgICB0aGlzLl9ib3QuX2dhc1ByZXNlcnZlci5wYXNzR2FzKHJlcy5yYXRlbGltaXRzKVxuICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXMgJiYgcmVzLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgbmV3TWVzc2FnZXMgPSByZXMubWVzc2FnZXNcbiAgICAgICAgICBjb25zb2xlLmxvZyhgZm91bmQ6ICR7bmV3TWVzc2FnZXMubGVuZ3RofSBuZXdNZXNzYWdlczogJHtjb252ZXJzYXRpb24uY2hhbm5lbH1gKVxuICAgICAgICAgIGlmIChyZXMubWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2VzKHttZXNzYWdlczogbmV3TWVzc2FnZXMsIGNoYW5uZWw6IGNvbnZlcnNhdGlvbi5jaGFubmVsfSlcbiAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBfY2hlY2tGb3JOZXdNZXNzYWdlc0luQ29udmVyc2F0aW9ucyhhcmc6IHtjb252ZXJzYXRpb25zOiBhbnksIGluZGV4PzogbnVtYmVyfSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3Qge2NvbnZlcnNhdGlvbnN9ID0gYXJnXG4gICAgbGV0IHtpbmRleH0gPSBhcmdcbiAgICBpZiAoIWluZGV4KSB7XG4gICAgICBpbmRleCA9IDBcbiAgICB9XG4gICAgaWYgKGluZGV4ID09PSBjb252ZXJzYXRpb25zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgQ0hFQ0tJTkcgJHtpbmRleH0sICR7Y29udmVyc2F0aW9uc1tpbmRleF0uY2hhbm5lbH0gZm9yIG5ldyBtZXNzYWdlc2ApXG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrRm9yTmV3TWVzc2FnZXNJbk9uZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25zW2luZGV4XSkudGhlbigoKSA9PiB7XG4gICAgICBpZiAoaW5kZXggKyAxID09PSBjb252ZXJzYXRpb25zLmxlbmd0aCkge1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrRm9yTmV3TWVzc2FnZXNJbkNvbnZlcnNhdGlvbnMoe2NvbnZlcnNhdGlvbnMsIGluZGV4OiBpbmRleCArIDF9KVxuICAgIH0pXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIF9jaGVja0Zvck5ld01lc3NhZ2VzSW5BbGxDb252ZXJzYXRpb25zKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX2JvdFxuICAgICAgLmNoYXRMaXN0KHt9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcyAmJiByZXMucmF0ZWxpbWl0cykge1xuICAgICAgICAgIHRoaXMuX2JvdC5fZ2FzUHJlc2VydmVyLnBhc3NHYXMocmVzLnJhdGVsaW1pdHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcyAmJiByZXMuY29udmVyc2F0aW9ucykge1xuICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSByZXMuY29udmVyc2F0aW9ucy5maWx0ZXIoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYy51bnJlYWRcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnNvbGUubG9nKGBPZiAke3Jlcy5jb252ZXJzYXRpb25zLmxlbmd0aH0gdGhlcmUgYXJlICR7Y29udmVyc2F0aW9ucy5sZW5ndGh9IHRoYXQgYXJlIHVucmVhZC5gKVxuICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja0Zvck5ld01lc3NhZ2VzSW5Db252ZXJzYXRpb25zKHtjb252ZXJzYXRpb25zfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnR290IGVycm9yIGdldHRpbmcgY2hhdCBsaXN0OicsIGVycilcbiAgICAgIH0pXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIF93YXRjaExvb3AoKTogdm9pZCB7XG4gICAgdGhpcy5fY2hlY2tGb3JOZXdNZXNzYWdlc0luQWxsQ29udmVyc2F0aW9ucy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5fYm90Ll9nYXNQcmVzZXJ2ZXIucmVjb21tZW5kZWRXYWl0KClcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl9sb29wQ291bnQrK1xuICAgICAgICB0aGlzLl93YXRjaExvb3AoKVxuICAgICAgfSwgZGVsYXkpXG4gICAgfSlcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG59XG5cbmV4cG9ydCB7RnVsbFdhdGNoZXJ9XG4iLCIvLyBAZmxvd1xubGV0IHR3ZWFrYWJsZXMgPSB7XG4gIE1JTl9DSEFOTkVMX1dBVENIX0xPT1A6IDEwMDAsXG4gIE1BWF9DSEFOTkVMX1dBVENIX0xPT1A6IDYwMDAwLFxuICBERUZBVUxUX0dBUzogNTAwLFxuICBERUZBVUxUX1RJTUVfTEVGVDogMTUwMCxcbiAgVEFSR0VUX0dBU19SRU1BSU5JTkc6IDEwMCxcbiAgU0FGRVRZX0JVRkZFUjogMS41LFxuICBHQVNfTU9OSVRPUl9XSU5ET1c6IDEwMDAwLFxuICBHQVNfQURKX01VTFQ6IDEuMSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgdHdlYWthYmxlc1xuIiwiLy8gQGZsb3dcbmltcG9ydCB0d2Vha2FibGVzIGZyb20gJy4vdHdlYWthYmxlcy5qcydcblxuY2xhc3MgR2FzUHJlc2VydmVyIHtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIF9sYXN0UGFzc2VkR2FzOiBBcnJheTxhbnk+O1xuICBfY3VycmVudFdhaXQ6IG51bWJlcjtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGNvbnN0cnVjdG9yICgpIDogdm9pZCB7XG4gICAgdGhpcy5fbGFzdFBhc3NlZEdhcyA9IFtdXG4gICAgdGhpcy5fY3VycmVudFdhaXQgPSB0d2Vha2FibGVzLk1JTl9DSEFOTkVMX1dBVENIX0xPT1BcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgcGFzc0dhcyAocmF0ZUxpbWl0czogQXJyYXk8YW55PikgOiB2b2lkIHtcbiAgICB0aGlzLl9sYXN0UGFzc2VkR2FzLnB1c2gocmF0ZUxpbWl0c1swXSkgLy8gbGV0J3MganVzdCB0YWtlIHRoZSBmaXJzdCBmb3Igbm93XG4gICAgdGhpcy5fZmlsdGVyT2xkR2FzKClcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgcmVjb21tZW5kZWRXYWl0ICgpIDogbnVtYmVyIHtcbiAgICBsZXQgc3BlZWQgPSB0aGlzLl9nZXRDdXJyZW50U3BlZWQoKVxuICAgIGxldCBnYXMgPSB0aGlzLl9nZXRSZW1haW5pbmdHYXMoKVxuICAgIGxldCBnYXNfbGVmdF93aXRoX2J1ZmZlciA9IE1hdGgubWF4KDAsIGdhcyAtIHR3ZWFrYWJsZXMuVEFSR0VUX0dBU19SRU1BSU5JTkcpXG4gICAgbGV0IHRpbWVMZWZ0ID0gdGhpcy5fZ2V0VGltZVRpbGxSZXNldCgpXG4gICAgLy8gdGhpcy5fY3VycmVudFdhaXQgPSAxMDAwICogKHNwZWVkICogdGltZUxlZnQgLyBnYXMpICogdHdlYWthYmxlcy5TQUZFVFlfQlVGRkVSXG4gICAgaWYgKHNwZWVkICogdGltZUxlZnQgPiBnYXNfbGVmdF93aXRoX2J1ZmZlcikge1xuICAgICAgdGhpcy5fY3VycmVudFdhaXQgKj0gdHdlYWthYmxlcy5HQVNfQURKX01VTFRcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3VycmVudFdhaXQgLz0gdHdlYWthYmxlcy5HQVNfQURKX01VTFRcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudFdhaXQgPSBNYXRoLm1heCh0d2Vha2FibGVzLk1JTl9DSEFOTkVMX1dBVENIX0xPT1AsIHRoaXMuX2N1cnJlbnRXYWl0KVxuICAgIHRoaXMuX2N1cnJlbnRXYWl0ID0gTWF0aC5taW4odHdlYWthYmxlcy5NQVhfQ0hBTk5FTF9XQVRDSF9MT09QLCB0aGlzLl9jdXJyZW50V2FpdClcbiAgICBjb25zb2xlLmxvZyhgLi4uc3BlZWQ9JHtzcGVlZC50b0ZpeGVkKDIpfSwgZ2FzPSR7Z2FzfSwgdGltZUxlZnQ9JHt0aW1lTGVmdH0sIGN1cnJlbnRXYWl0PSR7dGhpcy5fY3VycmVudFdhaXR9LCBoaXN0b3J5PSR7dGhpcy5fbGFzdFBhc3NlZEdhcy5sZW5ndGh9YClcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFdhaXRcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgX2ZpbHRlck9sZEdhcyAoKSA6IHZvaWQge1xuICAgIGxldCBpbmQgPSAwXG4gICAgLy8gdGhyb3cgYXdheSBhbnkgZGF0YSBiZWZvcmUgYSByZXNldFxuICAgIGZvciAoaW5kID0gdGhpcy5fbGFzdFBhc3NlZEdhcy5sZW5ndGggLSAyOyBpbmQgPj0gMDsgaW5kLS0pIHtcbiAgICAgIGxldCBsYXRlc3QgPSB0aGlzLl9sYXN0UGFzc2VkR2FzW3RoaXMuX2xhc3RQYXNzZWRHYXMubGVuZ3RoIC0gMV1cbiAgICAgIGxldCBjdXJyID0gdGhpcy5fbGFzdFBhc3NlZEdhc1tpbmRdXG4gICAgICBpZiAoY3Vyci5nYXMgPCBsYXRlc3QuZ2FzIHx8IGN1cnIucmVzZXQgPCBsYXRlc3QucmVzZXQpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluZCA+PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnQkVGT1JFIEdBUyBDTEVBTlVQJywgdGhpcy5fbGFzdFBhc3NlZEdhcylcbiAgICAgIHRoaXMuX2xhc3RQYXNzZWRHYXMuc3BsaWNlKDAsIChpbmQgKyAxKSlcbiAgICAgIGNvbnNvbGUubG9nKCdBRlRFUiBHQVMgQ0xFQU5VUCcsIHRoaXMuX2xhc3RQYXNzZWRHYXMpXG4gICAgfVxuICAgIC8vIG5vdyB0aHJvdyBhd2F5IGFueXRoaW5nIG92ZXIgYSBjZXJ0YWluIGFnZVxuICAgIGlmICh0aGlzLl9sYXN0UGFzc2VkR2FzLmxlbmd0aCA+IDIpIHtcbiAgICAgIGxldCBrZWVwZXJzID0gdGhpcy5fbGFzdFBhc3NlZEdhcy5zbGljZSgtMilcbiAgICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5fbGFzdFBhc3NlZEdhcy5zbGljZSgwLCAtMilcbiAgICAgIGNhbmRpZGF0ZXMgPSBjYW5kaWRhdGVzLmZpbHRlcigoYykgPT4gYy5yZXNldCA8IGtlZXBlcnNbMV0ucmVzZXQgKyB0d2Vha2FibGVzLkdBU19NT05JVE9SX1dJTkRPVyAvIDEwMDApXG4gICAgICB0aGlzLl9sYXN0UGFzc2VkR2FzID0gY2FuZGlkYXRlcy5jb25jYXQoa2VlcGVycylcbiAgICAgIC8vY29uc29sZS5sb2codGhpcy5fbGFzdFBhc3NlZEdhcylcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIF9nZXRDdXJyZW50U3BlZWQgKCkgOiBudW1iZXIge1xuICAgIGlmICh0aGlzLl9sYXN0UGFzc2VkR2FzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiAxXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGcgPSB0aGlzLl9sYXN0UGFzc2VkR2FzXG4gICAgICBjb25zdCBnbGFzdCA9IGdbZy5sZW5ndGggLSAxXVxuICAgICAgY29uc3Qgc3BlZWQgPSAoZ1swXS5nYXMgLSBnbGFzdC5nYXMpIC8gKDEgKyBnWzBdLnJlc2V0IC0gZ2xhc3QucmVzZXQpXG4gICAgICByZXR1cm4gc3BlZWRcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIF9nZXRSZW1haW5pbmdHYXMgKCkgOiBudW1iZXIge1xuICAgIGlmICh0aGlzLl9sYXN0UGFzc2VkR2FzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHJldHVybiB0d2Vha2FibGVzLkRFRkFVTFRfR0FTXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9sYXN0UGFzc2VkR2FzW3RoaXMuX2xhc3RQYXNzZWRHYXMubGVuZ3RoIC0gMV0uZ2FzXG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBfZ2V0VGltZVRpbGxSZXNldCAoKSA6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuX2xhc3RQYXNzZWRHYXMubGVuZ3RoIDwgMSkge1xuICAgICAgcmV0dXJuIHR3ZWFrYWJsZXMuREVGQVVMVF9USU1FX0xFRlRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX2xhc3RQYXNzZWRHYXNbdGhpcy5fbGFzdFBhc3NlZEdhcy5sZW5ndGggLSAxXS5yZXNldFxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbn1cblxuZXhwb3J0IHtHYXNQcmVzZXJ2ZXJ9XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHtzcGF3bn0gZnJvbSAnY2hpbGRfcHJvY2VzcydcblxudHlwZSBQYXJhbXMgPSB7fFxuICBhcmdzOiBzdHJpbmdbXSxcbiAgc3RkaW5CdWZmZXI/OiBCdWZmZXIsXG58fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBrZXliYXNlRXhlYyhwYXJhbXM6IFBhcmFtcyk6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IGNoaWxkID0gc3Bhd24oJ2tleWJhc2UnLCBwYXJhbXMuYXJncylcbiAgY29uc29sZS5sb2coJ2luc2lkZSBrZXliYXNlIGV4ZWMnKVxuICBjb25zdCBvdXRCdWZmZXJzOiBCdWZmZXJbXSA9IFtdXG4gIGxldCBvdXQ6ID9zdHJpbmcgPSBudWxsXG5cbiAgaWYgKHBhcmFtcy5zdGRpbkJ1ZmZlcikge1xuICAgIGNoaWxkLnN0ZGluLndyaXRlKHBhcmFtcy5zdGRpbkJ1ZmZlcilcbiAgICBjaGlsZC5zdGRpbi5lbmQoKVxuICB9XG5cbiAgY2hpbGQuc3Rkb3V0Lm9uKCdkYXRhJywgY2h1bmsgPT4ge1xuICAgIG91dEJ1ZmZlcnMucHVzaChjaHVuaylcbiAgfSlcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNoaWxkLm9uKCdjbG9zZScsIGNvZGUgPT4ge1xuICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgZXhpdGVkIHdpdGggY29kZSAke2NvZGV9YCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzdGRvdXQgPSBCdWZmZXIuY29uY2F0KG91dEJ1ZmZlcnMpLnRvU3RyaW5nKCd1dGY4JylcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIG91dCA9IHN0ZG91dCA9PT0gJycgPyBzdGRvdXQgOiBKU09OLnBhcnNlKHN0ZG91dClcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJlamVjdChlKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUob3V0KVxuICAgIH0pXG4gIH0pXG59XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHtnZXRLZXliYXNlVXNlcm5hbWVBbmREZXZpY2VuYW1lfSBmcm9tICcuL2tleWJhc2Utc3RhdHVzLmpzJ1xuaW1wb3J0IHtydW5BcGlDb21tYW5kfSBmcm9tICcuL2NoYXQtYXBpLmpzJ1xuaW1wb3J0IHtDaGFubmVsV2F0Y2hlcn0gZnJvbSAnLi9jaGFubmVsLXdhdGNoZXIuanMnXG5pbXBvcnQge2NoYXRDaGFubmVsVG9LZXl9IGZyb20gJy4vdXRpbHMuanMnXG5pbXBvcnQge0Z1bGxXYXRjaGVyfSBmcm9tICcuL2Z1bGwtd2F0Y2hlci5qcydcbmltcG9ydCB7R2FzUHJlc2VydmVyfSBmcm9tICcuL2dhcy1wcmVzZXJ2ZXIuanMnXG5pbXBvcnQgdHlwZSB7TWVzc2FnZXNIYW5kbGVyLCBEZXZpY2VVc2VybmFtZVBhaXIsIENoYXRDaGFubmVsfSBmcm9tICcuL3R5cGVzLmpzJ1xuaW1wb3J0IHR5cGUge0FwaUNvbW1hbmRBcmd9IGZyb20gJy4vY2hhdC1hcGkuanMnXG5pbXBvcnQga2V5YmFzZUV4ZWMgZnJvbSAnLi9rZXliYXNlLWV4ZWMnXG5cbnR5cGUgSW5pdE9wdGlvbnMgPSB7fFxuICB1c2VybmFtZTogc3RyaW5nLFxuICBwYXBlcmtleTogc3RyaW5nLFxuICB2ZXJib3NlPzogYm9vbGVhbixcbnx9XG5cbi8qXG4gKiBUT0RPOiBCZXR0ZXIgRmxvdyB0eXBlcyBmb3IgSlNPTiBwYXJhbXMgdG8ga2V5Y2hhc2UgY2hhdCBhcGlcbiAqL1xudHlwZSBDaGF0TGlzdE9wdGlvbnMgPSB7fFxuICBudW1iZXI/OiBudW1iZXIsXG4gIHRpbWU/OiBzdHJpbmcsXG4gIHNpbmNlPzogc3RyaW5nLFxuICBpbmNsdWRlSGlkZGVuPzogYm9vbGVhbixcbiAgdG9waWNUeXBlPzogc3RyaW5nLFxuICBjaGFubmVsPzogc3RyaW5nLFxuICBwdWJsaWM/OiBib29sZWFuLFxuICBwcml2YXRlPzogYm9vbGVhbixcbnx9XG5cbi8vIC0tZXhwbG9kaW5nLWxpZmV0aW1lIGludGVudGlvbmFsbHkgbGVmdCBvdXRcbnR5cGUgQ2hhdFNlbmRPcHRpb25zID0ge3xcbiAgdG9waWNUeXBlPzogc3RyaW5nLFxuICBjaGFubmVsPzogc3RyaW5nLFxuICBtZXNzYWdlPzogc3RyaW5nLFxuICBwdWJsaWM/OiBib29sZWFuLFxuICBwcml2YXRlPzogYm9vbGVhbixcbiAgc2V0SGVhZGxpbmU/OiBzdHJpbmcsXG4gIGNsZWFySGVhZGxpbmU/OiBzdHJpbmcsXG4gIG5vbmJsb2NrPzogYm9vbGVhbixcbnx9XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY2xhc3MgQm90IHtcbiAgX2RQYWlyOiA/RGV2aWNlVXNlcm5hbWVQYWlyXG4gIF9pbml0aWFsaXplZDogYm9vbGVhblxuICBfY2hhbm5lbFdhdGNoZXJzOiBNYXA8c3RyaW5nLCBDaGFubmVsV2F0Y2hlcj5cbiAgX2Z1bGxXYXRjaGVyOiA/RnVsbFdhdGNoZXJcbiAgX2dhc1ByZXNlcnZlcjogR2FzUHJlc2VydmVyXG4gIF92ZXJib3NlOiBib29sZWFuXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl92ZXJib3NlID0gZmFsc2VcbiAgICB0aGlzLl9kUGFpciA9IG51bGxcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlXG4gICAgdGhpcy5fY2hhbm5lbFdhdGNoZXJzID0gbmV3IE1hcCgpXG4gICAgdGhpcy5fZnVsbFdhdGNoZXIgPSBudWxsXG4gICAgdGhpcy5fZ2FzUHJlc2VydmVyID0gbmV3IEdhc1ByZXNlcnZlcigpXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGluaXQob3B0aW9uczogSW5pdE9wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xuICAgIHRoaXMuX3ZlcmJvc2UgPSBvcHRpb25zLnZlcmJvc2UgfHwgZmFsc2VcblxuICAgIHJldHVybiBrZXliYXNlRXhlYyh7XG4gICAgICBhcmdzOiBbJ29uZXNob3QnLCAnLS11c2VybmFtZScsIG9wdGlvbnMudXNlcm5hbWUsICctLXBhcGVya2V5Jywgb3B0aW9ucy5wYXBlcmtleV0sXG4gICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGdldEtleWJhc2VVc2VybmFtZUFuZERldmljZW5hbWUoKS50aGVuKGN1cnJlbnREUGFpciA9PiB7XG4gICAgICAgICAgaWYgKGN1cnJlbnREUGFpcikge1xuICAgICAgICAgICAgdGhpcy5fZFBhaXIgPSBjdXJyZW50RFBhaXJcbiAgICAgICAgICAgIHRoaXMuX2xvZyhgaW50aWFsaXplZCAke2N1cnJlbnREUGFpci51c2VybmFtZX0gKGRldmljZT0ke2N1cnJlbnREUGFpci5kZXZpY2VuYW1lfSlgKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGNoYXRMaXN0KG9wdGlvbnM6IENoYXRMaXN0T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX3NhZmVseVJ1bkFwaUNvbW1hbmQoe21ldGhvZDogJ2xpc3QnLCBvcHRpb25zfSlcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgY2hhdFNlbmQob3B0aW9uczogQ2hhdFNlbmRPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB7Y2hhbm5lbCwgbWVzc2FnZX0gPSBvcHRpb25zXG4gICAgcmV0dXJuIHRoaXMuX3NhZmVseVJ1bkFwaUNvbW1hbmQoe21ldGhvZDogJ3NlbmQnLCBvcHRpb25zOiB7Y2hhbm5lbCwgbWVzc2FnZX19KVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBjaGF0UmVhZChvcHRpb25zOiB7Y2hhbm5lbDogQ2hhdENoYW5uZWwsIHVucmVhZE9ubHk/OiBib29sZWFuLCBwZWVrPzogYm9vbGVhbn0pOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHtjaGFubmVsfSA9IG9wdGlvbnNcbiAgICBsZXQgcGVlazogYm9vbGVhbiA9IGZhbHNlXG4gICAgbGV0IHVucmVhZE9ubHk6IGJvb2xlYW4gPSBmYWxzZVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wZWVrICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcGVlayA9IG9wdGlvbnMucGVla1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudW5yZWFkT25seSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVucmVhZE9ubHkgPSBvcHRpb25zLnVucmVhZE9ubHlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NhZmVseVJ1bkFwaUNvbW1hbmQoe21ldGhvZDogJ3JlYWQnLCBvcHRpb25zOiB7Y2hhbm5lbCwgcGVlaywgdW5yZWFkT25seX19KVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBjaGF0RGVsZXRlKG9wdGlvbnM6IHtjaGFubmVsOiBDaGF0Q2hhbm5lbCwgbWVzc2FnZUlkOiBudW1iZXJ9KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB7Y2hhbm5lbCwgbWVzc2FnZUlkfSA9IG9wdGlvbnNcbiAgICByZXR1cm4gdGhpcy5fc2FmZWx5UnVuQXBpQ29tbWFuZCh7bWV0aG9kOiAnZGVsZXRlJywgb3B0aW9uczoge2NoYW5uZWwsIG1lc3NhZ2VJZH19KVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBteUluZm8oKTogP0RldmljZVVzZXJuYW1lUGFpciB7XG4gICAgcmV0dXJuIHRoaXMuX2RQYWlyXG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHdhdGNoQ2hhbm5lbEZvck5ld01lc3NhZ2VzKG9wdGlvbnM6IHtjaGFubmVsOiBDaGF0Q2hhbm5lbCwgb25NZXNzYWdlczogTWVzc2FnZXNIYW5kbGVyfSkge1xuICAgIGNvbnN0IHtjaGFubmVsLCBvbk1lc3NhZ2VzfSA9IG9wdGlvbnNcbiAgICBjb25zdCBrZXkgPSBjaGF0Q2hhbm5lbFRvS2V5KGNoYW5uZWwpXG4gICAgaWYgKHRoaXMuX2NoYW5uZWxXYXRjaGVycy5oYXMoa2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBhbHJlYWR5IHdhdGNoaW5nIHRoZSBjaGFubmVsICR7SlNPTi5zdHJpbmdpZnkoY2hhbm5lbCl9YClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2hhbm5lbFdhdGNoZXJzLnNldChrZXksIG5ldyBDaGFubmVsV2F0Y2hlcih7Y2hhbm5lbCwgb25NZXNzYWdlcywgYm90OiB0aGlzfSkpXG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICB3YXRjaEFsbENoYW5uZWxzRm9yTmV3TWVzc2FnZXMob3B0aW9uczoge29uTWVzc2FnZXM6IE1lc3NhZ2VzSGFuZGxlcn0pIHtcbiAgICBjb25zdCB7b25NZXNzYWdlc30gPSBvcHRpb25zXG4gICAgaWYgKHRoaXMuX2Z1bGxXYXRjaGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGFscmVhZHkgd2F0Y2hpbmcgd2F0Y2hpbmc7IGNhbid0IGhhdmUgMiBtZXNzYWdlIHdhdGNoZXJzfWApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Z1bGxXYXRjaGVyID0gbmV3IEZ1bGxXYXRjaGVyKHtvbk1lc3NhZ2VzLCBib3Q6IHRoaXN9KVxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gIC0gbWFrZSBzdXJlIGluaXRlZCBva1xuICAvLyAgLSBtYWtlIHN1cmUgdXNlciBpcyBzdGlsbCB0aGUgc2FtZSB1c2VyIHNpbmNlIGluaXRcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBfbG9nKG1zZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3ZlcmJvc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKG1zZylcbiAgICB9XG4gIH1cblxuICBfY2hlY2tVc2VyQW5kSW5pdCgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnZXRLZXliYXNlVXNlcm5hbWVBbmREZXZpY2VuYW1lKCkudGhlbihjdXJyZW50RFBhaXIgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIXRoaXMuX2luaXRpYWxpemVkIHx8XG4gICAgICAgICAgIWN1cnJlbnREUGFpciB8fFxuICAgICAgICAgICF0aGlzLl9kUGFpciB8fFxuICAgICAgICAgIGN1cnJlbnREUGFpci51c2VybmFtZSAhPT0gdGhpcy5fZFBhaXIudXNlcm5hbWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVWgtb2gsIHVzZXJuYW1lIGhhcyBjaGFuZ2VkIG9yIHdlIG5ldmVyIGluaXRpYWxpemVkIGNvcnJlY3RseS5gKSlcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgX3NhZmVseVJ1bkFwaUNvbW1hbmQoYXJnOiBBcGlDb21tYW5kQXJnKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fY2hlY2tVc2VyQW5kSW5pdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gcnVuQXBpQ29tbWFuZChhcmcpXG4gICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQge0JvdH1cbiIsIi8vIEBmbG93XG5pbXBvcnQge0JvdH0gZnJvbSAnLi9ib3QuanMnXG5cbmV4cG9ydCB7Qm90fVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')}])});